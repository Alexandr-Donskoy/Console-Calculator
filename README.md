# Консольный калькулятор. Задание E1

## Принцип работы:
1. Ввод выражения
2. Валидация (проверка корректности выражения)
3. Токенизация (разбиение на отдельные элементы (числа, операторы, скобки))
4. Парсинг (рекурсивный разбор выражения с учетом приоритетов операций)
5. Получение результата

## Приоретет операций
1. Скобки `()`
2. Унарные операторы `+`, `-`
3. Умножение и деление `*`, `/`
4. Сложение и вычитание `+`, `-`


## Структура
```
calculator/
├── main.py          # Главный файл для запуска
├── calculator.py    # Основной класс Calculator
├── tokenizer.py     # Токенизация и валидация выражений
├── parser.py        # Парсинг и вычисления
└── tests.py         # Тесты
```

## Описание файлов

### main.py
#### Главный файл программы. Содержит:
* Функцию `main()` - основной цикл программы
* Обработку пользовательского ввода
* Команды `quit` (выход) и `test` (запуск тестов)

### calculator.py
#### Основной класс Calculator. Функции:
* `calculate(expression)` - главный метод для вычисления выражения
* Координирует работу токенизатора и парсера

### tokenizer.py
#### Класс Tokenizer для работы с токенами. Функции:
1. `validate_expression(expression)` - проверка выражения:
  * Проверка на пустую строку
  * Проверка допустимых символов (цифры, операторы, скобки, точка)
  * Проверка корректности чисел (что нет множественных точек)
  * Проверка баланса скобок
  * Проверка что выражение не начинается с __*__ или __/__ и не заканчивается оператором

2. `validate_tokens(tokens)` - проверка последовательности токенов:
  * Не может быть двух операторов подряд (кроме унарных __+-__)
  * После числа не может идти открывающая скобка
  * После закрывающей скобки не может идти число
  * После открывающей скобки не может идти __*__ или __/__

3. `tokenize(expression)` - разбиение выражения на токены:
  * Удаление пробелов
  * Разбиение на числа и операторы с помощью регулярных выражений
  * Проверка на нераспознанные символы

### parser.py
#### Класс Parser для вычисления выражений. Использует рекурсивный спуск. Функции:
1. `parse(tokens)` - запускает разбор выражения

2. `expr()` - обработка сложения и вычитания:
  * Вызывает __term()__ для первого слагаемого
  * Пока есть __+__ или __-__, вызывает __term()__ для следующего слагаемого
  * Возвращает результат

3. `term()` - обработка умножения и деления:
  * Вызывает __factor()__ для первого множителя
  * Пока есть __*__ или __/__, вызывает __factor()__ для следующего множителя
  * Проверяет деление на ноль
  * Возвращает результат

4. `factor()` - обработка чисел, унарных операторов и скобок:
  * Если токен __+__ или __-__ (унарный), рекурсивно вызывает __factor()__
  * Если токен число - преобразует в float и возвращает
  * Если токен __(__ - вычисляет выражение в скобках через __expr()__

### tests.py
#### Функция run_comprehensive_tests() - комплексное тестирование:
* Тесты корректных выражений с проверкой результатов
* Тесты ошибочных выражений с проверкой обработки ошибок
